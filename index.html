<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- <script type="text/javascript" src="https://connect.facebook.net/en_US/fbinstant.6.2.js"></script> -->

	<script type="text/javascript" src="fbinstant.6.0.mock.js"></script>

	<style media="screen">
		body { background-color: #000; color: #fff; text-align: center; }
		.table{ display: table; }
		.row{ display: table-row; }
		.cell{display: table-cell;border:1px solid #FFF;width:50px;height:50px;}
	</style>
</head>
<body>
	<div class=""><p>Value 1: <span class="value1"></span></p></div>
	<div class=""><p>Value 2: <span class="value2"></span></p></div>
	<button class="button1" type="button" name="button">Pawn 1</button>
	<button class="button2" type="button" name="button">Pawn 2</button>
	<!-- <button class="button2" type="button" name="button">Remove Value 2</button> -->
	<script type="text/javascript">
	var turn = Math.round(Math.random() * 1) + 1;

	function endGame( player ) { console.log('END : ' + player +' loose.') };

	function select(obj) {
		return;
	}

	function move(from, to) {
		return;
	}

	function atking (agg, def) {
		var random = Math.round(Math.random() * 1);
		console.log(random);
		agg.hit(def, random);
		if(def.die()){ endGame(def.user) };
	}

	function oPawn(user, hp, atk) {
		this.user = user;
		this.hp  = hp;
		this.atk = atk;
		this.hit = function(target, raise) {
				target.hp -= this.atk + raise;
		};
		this.move = function(pos){
			return pos;
		};
		this.die = function() {
			return this.hp <= 0;
		};
	};
	window.onload = function() {
		var pawn1 = new oPawn("Person1", 2, 2);
		var pawn2 = new oPawn("Person2", 4, 1);

		function ftn1(evt){
			if(turn == 1){
				turn = 2;
				atking(pawn1, pawn2);
				document.querySelector(".value2").innerHTML = pawn2.hp;
			}else{
				turn = 1;
				atking(pawn2, pawn1);
				document.querySelector(".value1").innerHTML = pawn1.hp;
			}
		};

		function ftn2(e){
			console.log(pawn2.select())
		}

		function startGame() {
				document.querySelector(".value1").innerHTML = pawn1.hp;
				document.querySelector(".value2").innerHTML = pawn2.hp;
				document.querySelector(".button1").addEventListener("click", ftn1);
				document.querySelector(".button2").addEventListener("click", ftn1);
		};

		FBInstant.initializeAsync().then(function() {
			FBInstant.startGameAsync().then(function() {
				startGame();
			});
		});
	};
	</script>
</body>
</html>
